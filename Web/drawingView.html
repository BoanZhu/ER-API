<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
<head><meta charset="UTF-8">
    <title>Create View</title>
    <link rel="stylesheet" type="text/css" href="css/dashboard.css">
    <link rel="stylesheet" type="text/css" href="css/menu.css">
    <script type = "text/javascript" src="js/go-debug.js"></script>
    <script type = "text/javascript" src="API/jquery-3.2.1.js"></script>
    <script src="https://unpkg.com/gojs@2.2.16/release/go.js"></script>
    <script src="https://unpkg.com/gojs@2.2.16/extensions/Figures.js"></script>
    <script src="https://unpkg.com/gojs@2.2.17/extensions/DataInspector.js"></script>
    <script src="./js/init.js?v=1.19"></script>
    <script src="js/utility.js?v=1.19"></script>
    <script src="js/crudRequest.js?v=1.19"></script>
    <script src="js/nodeDesign.js?v=1.19"></script>
    <script src="js/handler.js?v=1.19"></script>

</head>
<body>
<nav>
    <!--			<img src="img/imageu.jpg" width="258" height="82" style = "float:left;">-->
    <ul class="nav_ul clear_fix">
        <li class="one"></li>
            <li><a onclick="deleteSchema()"><span class="glyphicon glyphicon-thumbs-up" aria-hidden="true"></span>Delete ER Model</a></li>
            <li><a onclick="examineDuplicate()"><span class="glyphicon glyphicon-cutlery" aria-hidden="true"></span>examine</a></li>
            <li><a onclick="renameSchema()"><span class="glyphicon glyphicon-camera" aria-hidden="true"></span>Rename</a></li>

    </ul>
</nav>
<!--<div id="myDiagramDiv" class = "diagram"></div>-->
<div id="infoDraggable" class="draggable ui-draggable" style="vertical-align: top; padding: 5px; top: 80px; left: 80%;">
    <div id="infoDraggableHandle" class="handle ui-draggable-handle" style="display:none;">Attribute Info</div>
    <div id ="AttributeIndo" style="display:none;">
        <div id="myInfo" class="inspector"><table><tbody>
        <input id="selectedAttributeKey" style="display: none">
        <tr><td>Entity Name:</td><td><input id="entityNameInfo" readonly="true"></td></tr>
        <tr><td>Attribute Name:</td><td><input id="attributeNameInfo"></td></tr>
        <tr><td>Primary Key:</td><td><input type="checkbox" name="isPrimary" id="isPrimaryKey"></td></tr>
        <tr><td>Allow not null:</td><td><input type="checkbox" name="isNotNull" id="allowNotNull"></td></tr>
        <tr><td>Data Type:</td><td>
            <input style="font-size: 12px" id="datatypeChoices" type="text" list="datatypeChoice" placeholder="please choose types">
            <datalist id="datatypeChoice">
                <option id="datatypeChoice1" value="CHAR">
                <option id="datatypeChoice2" value="VARCHAR">
                <option id="datatypeChoice3" value="TEXT">
                <option id="datatypeChoice4" value="TINYINT">
                <option id="datatypeChoice5" value="SMALLINT">
                <option id="datatypeChoice6" value="INT">
                <option id="datatypeChoice7" value="BIGINT">
                <option id="datatypeChoice8" value="FLOAT">
                <option id="datatypeChoice9" value="DOUBLE">
                <option id="datatypeChoice10" value="DATATIME">
            </datalist>
        </td></tr>
        <tr><td><button onclick="modifyAttribute()">submit</button></td></tr>
        </tbody></table></div>
    </div><br>

    <div class="handle ui-draggable-handle">Operations</div><br>
    <button style="text-align: center" class="blue">export json</button><br /><br />
    <button style="text-align: center" class="blue">load json</button><br /><br />
    <button id="exportPng" style="text-align: center" class="blue" onclick="exportPng()">export png</button>
</div>

<div style="display: inline-block; vertical-align: top; width:80%">
    <div id="myDiagramDiv" style="background-color: whitesmoke; border: 1px solid black; height: 800px; position: relative; -webkit-tap-highlight-color: rgba(255, 255, 255, 0); cursor: auto; font: bold 9pt Helvetica, Arial, sans-serif;">
    </div>
    <div id="model" style="display:none; background-color: whitesmoke; border: 1px solid black; height: 800px; position: relative; -webkit-tap-highlight-color: rgba(255, 255, 255, 0); cursor: auto; font: bold 9pt Helvetica, Arial, sans-serif;">
    </div>
</div>


<!--<div class="banner"><div class="inner"></div></div>-->

<div id="buttons">
    <button id="loadButton" onclick="load()">Load</button>
    <button id="SaveButton" onclick="save()" disabled="">Save</button>
</div>

<textarea id="mySavedModel" style="width:100%;height:240px">
{ "class": "GraphLinksModel",
  "linkFromPortIdProperty": "fromPort",
  "linkToPortIdProperty": "toPort",
  "nodeDataArray": [
{"name":"New Entity0","category":"entity","from":true,"to":true,"key":745,"location":{"class":"go.Point","x":-153.83984375,"y":71.05859375}},
{"name":"NewA0","category":"Attribute","location":{"class":"go.Point","x":-273.83984375,"y":71.05859375},"dataType":1,"parentId":745,"allowNotNull":false,"isPrimary":true,"key":"4_NewA0","underline":true},
{"name":"NewA1","category":"Attribute","location":{"class":"go.Point","x":-273.83984375,"y":83.55859375},"dataType":1,"parentId":745,"allowNotNull":false,"isPrimary":false,"key":"902_NewA1"},
{"name":"Subset0","category":"subset","location":{"class":"go.Point","x":-269.00079814449714,"y":204.92844684864258},"parentId":745,"key":296},
{"name":"WeakE0","category":"weakEntity","primaryKey":"NewA0","location":{"class":"go.Point","x":-55.16122550945032,"y":-117.17285555010068},"parentId":745,"key":773},
{"name":"New Entity1","category":"entity","from":true,"to":true,"key":307,"location":{"class":"go.Point","x":27.67578125,"y":218.8203125}},
{"key":"relation_648","name":"test","location":{"class":"go.Point","x":-63.08203125,"y":144.939453125},"category":"relation","from":true,"to":true},
{"name":"New Entity2","category":"entity","from":true,"to":true,"key":921,"location":{"class":"go.Point","x":127.34375,"y":62.109375}},
{"name":"NewA2","category":"relation_attribute","location":{"class":"go.Point","x":-183.08203125,"y":144.939453125},"dataType":1,"parentId":"relation_648","allowNotNull":false,"key":"113_NewA2"}
],
  "linkDataArray": [
{"from":745,"to":"4_NewA0","category":"normalLink","fromPort":3,"toPort":5},
{"from":745,"to":"902_NewA1","category":"normalLink","fromPort":3,"toPort":5},
{"from":296,"to":745,"category":"subsetLink","fromPort":5,"toPort":2},
{"from":745,"to":773,"toText":"1:1","fromText":"0:N","relation":"for","category":"weakLink","fromPort":1,"toPort":2,"key":675,"edgeIDFirst":126,"edgeIDSecond":646},
{"from":745,"to":"relation_648","fromText":"1:1","category":"entityLink","fromPort":4,"toPort":1},
{"from":307,"to":"relation_648","fromText":"1:1","category":"entityLink","fromPort":1,"toPort":4},
{"from":921,"to":"relation_648","fromPort":3,"toPort":4,"fromText":"1:N","category":"entityLink","key":833},
{"from":"relation_648","to":"113_NewA2","category":"normalLink","fromPort":3,"toPort":5}
]}
</textarea>

<footer>ERAPI.Copyright Â©2021 | Imperial college london-Group project</footer>

</body>
<script id="code">
    function load() {
        myDiagram.model = go.Model.fromJson(document.getElementById("mySavedModel").value);
    }
    function save() {
        document.getElementById("mySavedModel").value = myDiagram.model.toJson();
        myDiagram.isModified = false;
    }
    //load model when first accessing the page
    window.addEventListener('DOMContentLoaded', init);
</script>
</html>